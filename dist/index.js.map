{"version":3,"file":"index.js","sources":["../src/GridHelper/index.tsx","../src/Grid/Grid.constants.ts","../src/Grid/GridSystem.tsx","../src/Grid/Grid.hooks.ts","../src/Grid/Grid.tsx","../src/Grid/GridColumn.tsx"],"sourcesContent":["import React, {FunctionComponent, useContext, useEffect, useState} from 'react'\nimport {Column, useBreakpoint, Grid, GridSystemContext} from '..';\n\nimport styles from './GridHelper.module.css';\n\n\ninterface GridHelperProps {\n    margin?: {\n        [index: string]: string;\n    }\n}\n\n\nexport const GridHelper: FunctionComponent<GridHelperProps> =\n    ({\n         margin\n     }): JSX.Element => {\n\n        const savedVisibility = (localStorage.getItem('grid-helper') === 'true');\n        const {breakpoints} = useContext(GridSystemContext)\n        const currentBreakpoint = useBreakpoint()\n        const [visible, setVisible] = useState<boolean>(savedVisibility ? savedVisibility : false);\n\n        useEffect(() => {\n            const toggleGrid = ({key, ctrlKey}: KeyboardEvent): void => {\n                if (ctrlKey && key === 'g') {\n                    const isVisible = !visible;\n                    setVisible(isVisible);\n                    localStorage.setItem('grid-helper', isVisible.toString());\n                }\n            };\n\n            window.addEventListener('keyup', toggleGrid);\n\n            return (): void => window.removeEventListener('keyup', toggleGrid);\n        }, [visible]);\n\n        return (\n            <div className={`${styles.wrapper} ${visible ? styles.wrapper__visible : ''}`}>\n                {Object.keys(breakpoints).map((breakpoint, index) => (\n                    <div\n                        className={styles.container}\n                        style={{\n                            display: currentBreakpoint !== breakpoint ? 'none' : '',\n                            margin: margin && margin[breakpoint] ? `0 ${margin[breakpoint]}` : 'auto'\n                        }} key={`g-${breakpoint}-${index}`}>\n                        <Grid className={styles.container}>\n                            {\n                                [...Array(breakpoints[breakpoint].columns)].fill('c').map((column, index) =>\n                                    <Column key={`${breakpoint}-${column}-${index}`} className={styles.column}\n                                            size={{[breakpoint]: 1}}/>)\n                            }\n                        </Grid>\n                    </div>\n                ))}\n            </div>\n        )\n    }\n","import {Breakpoint, GridSettings} from \"./Grid.interfaces\";\n\nexport const GRID_SETTINGS: GridSettings = {\n    breakpoints: {\n        sm: {\n            columns: 4,\n            gutterSize: 5,\n            maxWidth: 600,\n        },\n        md: {\n            columns: 8,\n            gutterSize: 5,\n            minWidth: 600,\n            maxWidth: 900,\n        },\n        lg: {\n            columns: 12,\n            gutterSize: 10,\n            minWidth: 900,\n        }\n    },\n    prefixes: {\n        grid: 'g',\n        gridColumn: 'gc',\n    }\n}\n\nconst getBreakpointQuery = (\n    {minWidth, maxWidth}: Breakpoint,\n    styles: string\n) => {\n    const query = [];\n\n    if (minWidth) {\n        query.push(`(min-width: ${minWidth}px)`);\n    }\n    if (maxWidth) {\n        query.push(`(max-width: ${maxWidth}px)`);\n    }\n\n    return `@media ${query.join(' and ')} {${styles}}`\n};\n\nexport const createStyles = (gridSettings: GridSettings) => {\n    const style = document.createElement('style');\n    const mediaQuery: string[] = [];\n    const {breakpoints, prefixes} = gridSettings;\n\n    const gridStyle = `.${prefixes.grid} {\n        display: flex;\n        flex-basis: auto;\n        flex-direction: row;\n        flex-wrap: wrap;\n        width: auto;\n    }`;\n\n    Object.keys(breakpoints).forEach((breakpoint) => {\n        let items = '';\n        const {gutterSize} = breakpoints[breakpoint];\n\n        // CSS Grid\n        items += `.${prefixes.grid}-${breakpoint} {\n                margin-left: -${gutterSize}px;\n                margin-right: -${gutterSize}px;\n            }`;\n\n        // CSS column\n        items += `.${prefixes.gridColumn}-${breakpoint} {\n                box-sizing: border-box;\n                padding-left: ${gutterSize}px;\n                padding-right: ${gutterSize}px;\n            }`;\n\n        for (let i = 1; i <= breakpoints[breakpoint].columns; i++) {\n            for (let j = 1; j <= i; j++) {\n                const width = (j / i) * 100;\n\n                items += `.${prefixes.gridColumn}-${breakpoint}-${j}-${i} {\n                        flex-basis: ${width}%;\n                        width: ${width}%;\n                    }`;\n\n                // CSS offset left\n                items += `.${prefixes.gridColumn}-ol-${breakpoint}-${j}-${i} {\n                        margin-left: ${width}%;\n                    }`;\n\n                // CSS offset left\n                items += `.${prefixes.gridColumn}-or-${breakpoint}-${j}-${i} {\n                        margin-right: ${width}%;\n                    }`;\n            }\n        }\n\n        mediaQuery.push(getBreakpointQuery(breakpoints[breakpoint], items))\n    });\n\n    mediaQuery.push(gridStyle);\n\n    document.head.appendChild(style);\n    style.appendChild(document.createTextNode(mediaQuery.join('')));\n};\n","import React, {createContext, FunctionComponent, useEffect} from 'react'\nimport {GridSettings, GridSystemProps} from './Grid.interfaces'\nimport {GridHelper} from \"../GridHelper\";\nimport {createStyles, GRID_SETTINGS} from \"./Grid.constants\";\n\n\nexport const GridSystemContext = createContext<GridSettings>(GRID_SETTINGS);\n\nexport const GridSystem: FunctionComponent<GridSystemProps> =\n    ({\n         settings = GRID_SETTINGS,\n         useGridHelper = false,\n         children\n     }) => {\n        useEffect(() => createStyles(settings), [settings]);\n\n        return (\n            <GridSystemContext.Provider value={settings}>\n                {children}\n                {useGridHelper && <GridHelper margin={settings?.gridHelperMargins}/>}\n            </GridSystemContext.Provider>\n        );\n    }\n","import {useContext, useEffect, useState} from \"react\";\nimport {GridSystemContext} from \"./GridSystem\";\n\nexport const useBreakpoint = () => {\n    const gridContext = useContext(GridSystemContext);\n    const [breakpoint, setBreakpoint] = useState<string>(\n        Object.keys(gridContext.breakpoints)[0]\n    );\n\n    const resvolveBreakpoint = () => {\n        const bp = Object.keys(gridContext.breakpoints).find((key) => {\n            const {minWidth, maxWidth} = gridContext.breakpoints[key];\n            const {innerWidth} = window;\n\n            let breakpoint = null;\n\n            if (\n                minWidth &&\n                maxWidth &&\n                innerWidth >= minWidth &&\n                innerWidth <= maxWidth\n            ) {\n                breakpoint = key;\n            } else if (minWidth && !maxWidth && innerWidth >= minWidth) {\n                breakpoint = key;\n            } else if (!minWidth && maxWidth && innerWidth < maxWidth) {\n                breakpoint = key;\n            }\n\n            return breakpoint;\n        });\n\n        if (bp) {\n            setBreakpoint(bp);\n        }\n    }\n\n    useEffect(() => {\n        let tm: number;\n        const handleResize = () => {\n            tm = window.setTimeout(() => resvolveBreakpoint(), 10);\n        };\n\n        window.addEventListener(\"resize\", handleResize);\n\n        handleResize();\n\n        return () => {\n            window.clearTimeout(tm);\n            window.removeEventListener(\"resize\", handleResize);\n        }\n    }, [gridContext.breakpoints]);\n\n    return breakpoint;\n};\n","import React, { useContext } from 'react'\nimport { GridSystemContext } from './GridSystem'\n\ninterface GridContainerProps {\n  className?: string;\n  style?: {};\n}\n\nexport const Grid: React.FC<GridContainerProps> = ({\n  children,\n  className = '',\n  style\n}) => {\n  const { breakpoints, prefixes } = useContext(GridSystemContext)\n  const classNames = Object.keys(breakpoints)\n    .map((breakpoint) => `g-${breakpoint}`)\n    .join(' ')\n\n  return (\n    <div\n      style={style}\n      className={`${prefixes.grid} ${classNames} ${className}`}\n    >\n      {children}\n    </div>\n  )\n}\n","import React, {FunctionComponent, useContext, useEffect, useRef, useState} from 'react';\nimport {GridSystemContext} from './GridSystem';\n\n\ninterface GridColumnProps {\n  className?: string;\n  size: {\n    [index: string]: number | undefined;\n  },\n  offsetLeft?: {\n    [index: string]: number | undefined;\n  },\n  offsetRight?: {\n    [index: string]: number | undefined;\n  }\n}\n\ninterface ColumnState {\n  classNames: string;\n  dataProps: { [index: string]: string | number; }\n}\n\nconst defaultState = {classNames: '', dataProps: {}};\n\nexport const Column: FunctionComponent<GridColumnProps> =\n  ({\n     children,\n     className = '',\n     size,\n     offsetLeft,\n     offsetRight\n   }) => {\n    const refColumn = useRef<HTMLDivElement>(null);\n    const {breakpoints, prefixes} = useContext(GridSystemContext);\n    const [state, setState] = useState<ColumnState>(defaultState)\n\n    const getParentSizes = () => {\n      const classNames: string[] = [];\n      let dataProps: { [index: string]: string | number } = {};\n\n      Object.keys(breakpoints).forEach(breakpoint => {\n        const parentSize = refColumn?.current?.parentElement\n          ?.closest(`[data-column-size-${breakpoint}]`)\n          ?.getAttribute(`data-column-size-${breakpoint}`);\n\n        const totalColumns = parentSize ? parentSize : breakpoints[breakpoint].columns;\n        const columnSize = size[breakpoint] ? size[breakpoint] : totalColumns;\n\n        classNames.push(`${prefixes.gridColumn}-${breakpoint} ${prefixes.gridColumn}-${breakpoint}-${columnSize}-${totalColumns}`);\n\n        if (offsetLeft && offsetLeft[breakpoint]) {\n          classNames.push(`${prefixes.gridColumn}-ol-${breakpoint}-${offsetLeft[breakpoint]}-${totalColumns}`);\n        }\n\n        if (offsetRight && offsetRight[breakpoint]) {\n          classNames.push(`${prefixes.gridColumn}-or-${breakpoint}-${offsetRight[breakpoint]}-${totalColumns}`);\n        }\n\n        if (columnSize) {\n          dataProps[`data-column-size-${breakpoint}`] = columnSize;\n        }\n      });\n\n      setState({\n        classNames: classNames.join(' '),\n        dataProps,\n      });\n    }\n\n    useEffect(() => getParentSizes(), [size, offsetLeft, offsetRight]);\n\n    return <div\n      ref={refColumn}\n      {...state.dataProps}\n      className={`${state.classNames} ${className}`}>\n      {children}\n    </div>;\n  };\n"],"names":["GridHelper","margin","savedVisibility","localStorage","getItem","useContext","GridSystemContext","breakpoints","currentBreakpoint","useBreakpoint","useState","visible","setVisible","useEffect","toggleGrid","key","ctrlKey","isVisible","setItem","toString","window","addEventListener","removeEventListener","React","className","styles","wrapper","wrapper__visible","Object","keys","map","breakpoint","index","container","style","display","Grid","Array","columns","fill","column","Column","size","GRID_SETTINGS","sm","gutterSize","maxWidth","md","minWidth","lg","prefixes","grid","gridColumn","getBreakpointQuery","query","push","join","createStyles","gridSettings","document","createElement","mediaQuery","gridStyle","forEach","items","i","j","width","head","appendChild","createTextNode","createContext","GridSystem","settings","useGridHelper","children","Provider","value","gridHelperMargins","gridContext","setBreakpoint","resvolveBreakpoint","bp","find","innerWidth","tm","handleResize","setTimeout","clearTimeout","classNames","defaultState","dataProps","offsetLeft","offsetRight","refColumn","useRef","state","setState","getParentSizes","parentSize","current","parentElement","closest","getAttribute","totalColumns","columnSize","ref"],"mappings":"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"}