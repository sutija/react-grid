{"version":3,"file":"index.modern.js","sources":["../src/GridHelper/index.tsx","../src/Grid/Grid.constants.ts","../src/Grid/GridSystem.tsx","../src/Grid/Grid.hooks.ts","../src/Grid/Grid.tsx","../src/Grid/GridColumn.tsx"],"sourcesContent":["import React, {FunctionComponent, useContext, useEffect, useState} from 'react'\nimport {Column, useBreakpoint, Grid, GridSystemContext} from '..';\n\nimport styles from './GridHelper.module.css';\n\n\ninterface GridHelperProps {\n    margin?: {\n        [index: string]: string;\n    }\n}\n\n\nexport const GridHelper: FunctionComponent<GridHelperProps> =\n    ({\n         margin\n     }): JSX.Element => {\n\n        const savedVisibility = (localStorage.getItem('grid-helper') === 'true');\n        const {breakpoints} = useContext(GridSystemContext)\n        const currentBreakpoint = useBreakpoint()\n        const [visible, setVisible] = useState<boolean>(savedVisibility ? savedVisibility : false);\n\n        useEffect(() => {\n            const toggleGrid = ({key, ctrlKey}: KeyboardEvent): void => {\n                if (ctrlKey && key === 'g') {\n                    const isVisible = !visible;\n                    setVisible(isVisible);\n                    localStorage.setItem('grid-helper', isVisible.toString());\n                }\n            };\n\n            window.addEventListener('keyup', toggleGrid);\n\n            return (): void => window.removeEventListener('keyup', toggleGrid);\n        }, [visible]);\n\n        return (\n            <div className={`${styles.wrapper} ${visible ? styles.wrapper__visible : ''}`}>\n                {Object.keys(breakpoints).map((breakpoint, index) => (\n                    <div\n                        className={styles.container}\n                        style={{\n                            display: currentBreakpoint !== breakpoint ? 'none' : '',\n                            margin: margin && margin[breakpoint] ? `0 ${margin[breakpoint]}` : 'auto'\n                        }} key={`g-${breakpoint}-${index}`}>\n                        <Grid className={styles.container}>\n                            {\n                                [...Array(breakpoints[breakpoint].columns)].fill('c').map((column, index) =>\n                                    <Column key={`${breakpoint}-${column}-${index}`} className={styles.column}\n                                            size={{[breakpoint]: 1}}/>)\n                            }\n                        </Grid>\n                    </div>\n                ))}\n            </div>\n        )\n    }\n","import {Breakpoint, GridSettings} from \"./Grid.interfaces\";\n\nexport const GRID_SETTINGS: GridSettings = {\n    breakpoints: {\n        sm: {\n            columns: 4,\n            gutterSize: 5,\n            maxWidth: 600,\n        },\n        md: {\n            columns: 8,\n            gutterSize: 5,\n            minWidth: 600,\n            maxWidth: 900,\n        },\n        lg: {\n            columns: 12,\n            gutterSize: 10,\n            minWidth: 900,\n        }\n    },\n    prefixes: {\n        grid: 'g',\n        gridColumn: 'gc',\n    }\n}\n\nconst getBreakpointQuery = (\n    {minWidth, maxWidth}: Breakpoint,\n    styles: string\n) => {\n    const query = [];\n\n    if (minWidth) {\n        query.push(`(min-width: ${minWidth}px)`);\n    }\n    if (maxWidth) {\n        query.push(`(max-width: ${maxWidth}px)`);\n    }\n\n    return `@media ${query.join(' and ')} {${styles}}`\n};\n\nexport const createStyles = (gridSettings: GridSettings) => {\n    const style = document.createElement('style');\n    const mediaQuery: string[] = [];\n    const {breakpoints, prefixes} = gridSettings;\n\n    const gridStyle = `.${prefixes.grid} {\n        display: flex;\n        flex-basis: auto;\n        flex-direction: row;\n        flex-wrap: wrap;\n        width: auto;\n    }`;\n\n    Object.keys(breakpoints).forEach((breakpoint) => {\n        let items = '';\n        const {gutterSize} = breakpoints[breakpoint];\n\n        // CSS Grid\n        items += `.${prefixes.grid}-${breakpoint} {\n                margin-left: -${gutterSize}px;\n                margin-right: -${gutterSize}px;\n            }`;\n\n        // CSS column\n        items += `.${prefixes.gridColumn}-${breakpoint} {\n                box-sizing: border-box;\n                padding-left: ${gutterSize}px;\n                padding-right: ${gutterSize}px;\n            }`;\n\n        for (let i = 1; i <= breakpoints[breakpoint].columns; i++) {\n            for (let j = 1; j <= i; j++) {\n                const width = (j / i) * 100;\n\n                items += `.${prefixes.gridColumn}-${breakpoint}-${j}-${i} {\n                        flex-basis: ${width}%;\n                        width: ${width}%;\n                    }`;\n\n                // CSS offset left\n                items += `.${prefixes.gridColumn}-ol-${breakpoint}-${j}-${i} {\n                        margin-left: ${width}%;\n                    }`;\n\n                // CSS offset left\n                items += `.${prefixes.gridColumn}-or-${breakpoint}-${j}-${i} {\n                        margin-right: ${width}%;\n                    }`;\n            }\n        }\n\n        mediaQuery.push(getBreakpointQuery(breakpoints[breakpoint], items))\n    });\n\n    mediaQuery.push(gridStyle);\n\n    document.head.appendChild(style);\n    style.appendChild(document.createTextNode(mediaQuery.join('')));\n};\n","import React, {createContext, FunctionComponent, useEffect} from 'react'\nimport {GridSettings, GridSystemProps} from './Grid.interfaces'\nimport {GridHelper} from \"../GridHelper\";\nimport {createStyles, GRID_SETTINGS} from \"./Grid.constants\";\n\n\nexport const GridSystemContext = createContext<GridSettings>(GRID_SETTINGS);\n\nexport const GridSystem: FunctionComponent<GridSystemProps> =\n    ({\n         settings = GRID_SETTINGS,\n         useGridHelper = false,\n         children\n     }) => {\n        useEffect(() => createStyles(settings), [settings]);\n\n        return (\n            <GridSystemContext.Provider value={settings}>\n                {children}\n                {useGridHelper && <GridHelper margin={settings?.gridHelperMargins}/>}\n            </GridSystemContext.Provider>\n        );\n    }\n","import {useContext, useEffect, useState} from \"react\";\nimport {GridSystemContext} from \"./GridSystem\";\n\nexport const useBreakpoint = () => {\n    const gridContext = useContext(GridSystemContext);\n    const [breakpoint, setBreakpoint] = useState<string>(\n        Object.keys(gridContext.breakpoints)[0]\n    );\n\n    const resvolveBreakpoint = () => {\n        const bp = Object.keys(gridContext.breakpoints).find((key) => {\n            const {minWidth, maxWidth} = gridContext.breakpoints[key];\n            const {innerWidth} = window;\n\n            let breakpoint = null;\n\n            if (\n                minWidth &&\n                maxWidth &&\n                innerWidth >= minWidth &&\n                innerWidth <= maxWidth\n            ) {\n                breakpoint = key;\n            } else if (minWidth && !maxWidth && innerWidth >= minWidth) {\n                breakpoint = key;\n            } else if (!minWidth && maxWidth && innerWidth < maxWidth) {\n                breakpoint = key;\n            }\n\n            return breakpoint;\n        });\n\n        if (bp) {\n            setBreakpoint(bp);\n        }\n    }\n\n    useEffect(() => {\n        let tm: number;\n        const handleResize = () => {\n            tm = window.setTimeout(() => resvolveBreakpoint(), 10);\n        };\n\n        window.addEventListener(\"resize\", handleResize);\n\n        handleResize();\n\n        return () => {\n            window.clearTimeout(tm);\n            window.removeEventListener(\"resize\", handleResize);\n        }\n    }, [gridContext.breakpoints]);\n\n    return breakpoint;\n};\n","import React, { useContext } from 'react'\nimport { GridSystemContext } from './GridSystem'\n\ninterface GridContainerProps {\n  className?: string;\n  style?: {};\n}\n\nexport const Grid: React.FC<GridContainerProps> = ({\n  children,\n  className = '',\n  style\n}) => {\n  const { breakpoints, prefixes } = useContext(GridSystemContext)\n  const classNames = Object.keys(breakpoints)\n    .map((breakpoint) => `g-${breakpoint}`)\n    .join(' ')\n\n  return (\n    <div\n      style={style}\n      className={`${prefixes.grid} ${classNames} ${className}`}\n    >\n      {children}\n    </div>\n  )\n}\n","import React, {FunctionComponent, useContext, useEffect, useRef, useState} from 'react';\nimport {GridSystemContext} from './GridSystem';\n\n\ninterface GridColumnProps {\n  className?: string;\n  size: {\n    [index: string]: number | undefined;\n  },\n  offsetLeft?: {\n    [index: string]: number | undefined;\n  },\n  offsetRight?: {\n    [index: string]: number | undefined;\n  }\n}\n\ninterface ColumnState {\n  classNames: string;\n  dataProps: { [index: string]: string | number; }\n}\n\nconst defaultState = {classNames: '', dataProps: {}};\n\nexport const Column: FunctionComponent<GridColumnProps> =\n  ({\n     children,\n     className = '',\n     size,\n     offsetLeft,\n     offsetRight\n   }) => {\n    const refColumn = useRef<HTMLDivElement>(null);\n    const {breakpoints, prefixes} = useContext(GridSystemContext);\n    const [state, setState] = useState<ColumnState>(defaultState)\n\n    const getParentSizes = () => {\n      const classNames: string[] = [];\n      let dataProps: { [index: string]: string | number } = {};\n\n      Object.keys(breakpoints).forEach(breakpoint => {\n        const parentSize = refColumn?.current?.parentElement\n          ?.closest(`[data-column-size-${breakpoint}]`)\n          ?.getAttribute(`data-column-size-${breakpoint}`);\n\n        const totalColumns = parentSize ? parentSize : breakpoints[breakpoint].columns;\n        const columnSize = size[breakpoint] ? size[breakpoint] : totalColumns;\n\n        classNames.push(`${prefixes.gridColumn}-${breakpoint} ${prefixes.gridColumn}-${breakpoint}-${columnSize}-${totalColumns}`);\n\n        if (offsetLeft && offsetLeft[breakpoint]) {\n          classNames.push(`${prefixes.gridColumn}-ol-${breakpoint}-${offsetLeft[breakpoint]}-${totalColumns}`);\n        }\n\n        if (offsetRight && offsetRight[breakpoint]) {\n          classNames.push(`${prefixes.gridColumn}-or-${breakpoint}-${offsetRight[breakpoint]}-${totalColumns}`);\n        }\n\n        if (columnSize) {\n          dataProps[`data-column-size-${breakpoint}`] = columnSize;\n        }\n      });\n\n      setState({\n        classNames: classNames.join(' '),\n        dataProps,\n      });\n    }\n\n    useEffect(() => getParentSizes(), [size, offsetLeft, offsetRight]);\n\n    return <div\n      ref={refColumn}\n      {...state.dataProps}\n      className={`${state.classNames} ${className}`}>\n      {children}\n    </div>;\n  };\n"],"names":["GridHelper","margin","savedVisibility","localStorage","getItem","breakpoints","useContext","GridSystemContext","currentBreakpoint","useBreakpoint","visible","setVisible","useState","useEffect","toggleGrid","key","ctrlKey","isVisible","setItem","toString","window","addEventListener","removeEventListener","React","className","styles","wrapper","wrapper__visible","Object","keys","map","breakpoint","index","container","style","display","Grid","Array","columns","fill","column","Column","size","GRID_SETTINGS","sm","gutterSize","maxWidth","md","minWidth","lg","prefixes","grid","gridColumn","getBreakpointQuery","query","push","join","createStyles","gridSettings","document","createElement","mediaQuery","gridStyle","forEach","items","i","j","width","head","appendChild","createTextNode","createContext","GridSystem","settings","useGridHelper","children","Provider","value","gridHelperMargins","gridContext","setBreakpoint","resvolveBreakpoint","bp","find","innerWidth","tm","handleResize","setTimeout","clearTimeout","classNames","defaultState","dataProps","offsetLeft","offsetRight","refColumn","useRef","state","setState","getParentSizes","parentSize","current","parentElement","closest","getAttribute","totalColumns","columnSize","ref"],"mappings":"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"}